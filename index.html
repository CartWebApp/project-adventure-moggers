<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css"> <!-- Link to your CSS file if you have one -->
    <title>An Interactive Story</title>
</head>
<body>
    
    <div id="intro">
        <h1>Mogquest</h1>

        <p>Jimmy moggingson is a horrifically buff 7 '6 nonchalant unemployed lightskin who spends his days playing dress to impress while living with this bombshell hot breadwinning wife. He wakes up to his beautiful wife. She is getting fed up with you playing roblox all day and tells you to get a job.</p>
    </div>
    <h2>So you do...</h2>
    <div id="story">

    </div>

    <div id="image-container">
        <img id="story-image" src="" alt="Story Image" style="width: 300px; height: 300px; display: none;">
    </div>

    <div id="buttons">

    </div>

    <script>
    
        let storyContainer = document.getElementById("story");
        let buttonContainer = document.getElementById("buttons");
        let imageContainer = document.getElementById("image-container");
        let storyImage = document.getElementById("story-image");

        let history = ["intro"];

        const story = {
            intro : {
                text : "Where do you go?",
                choices : [
                    ["Barb", "barb1"],
                    ["Gym", "gym1"],
                    ["Costco", "cost1"]
                ],
                image : "story.jpg" // Set image related to this page
            },
            barb1 : {
                text : "You decide to go to the barbershop, which hair cut do you get?",
                choices : [
                    ["Low Taper Fade", "barb2"],
                    ["Bald", "page3t"],
                    ["Dreads", "page4t"]
                ],
                image : "barber.jpg" // Set image related to this page
            },
            page2 : {
                text : "You decide to go to the gym, what do you do?",
                choices : [
                    ["Go to page 3", "page3"],
                    ["Go to page 4", "page4"],
                    ["Go to page 5", "page5"]
                ],
                image : "gym.png" // Set image related to this page
            },
            page3 : {
                text : "You decide to go to Costco, what do you buy?",
                choices : [
                    ["Go to page 4", "page4"],
                    ["Go to page 5", "page5"]
                ],
                image : "costco.jpg" // Set image related to this page
            },
            barb2 : {
                text : "YOU GO TO JAIL",
                choices : [
                    ["awww shucks", "end1"]
                ],
                image : "jail.jpg" // Set image related to this page
            },
            
            page3t : {
                text : "You get divorced",
                choices : [
                    ["Go to page 6", "page6"]
                ],
                image : "divorce.jpg" // Set image related to this page
            },
            end1 : {
                text : "The end!",
                choices : [
                    ["gg", ""]
                ],
                image : "end.jpg" // Set image related to this page
            },
            page4t : {
                text : "You go to Costco",
                choices : [],
                image : "costco-trip.jpg" // Set image related to this page
            }
        }

        function makeButton(btnText, choice){
            let button = document.createElement("button");

            button.innerHTML = btnText;

            buttonContainer.appendChild(button);

            button.addEventListener ("click", function() {
                history.push(choice);
                showStory();
            });
        }

        function buildStory(text) {
            let storyItem = document.createElement("p");

            storyItem.innerText = text;

            storyContainer.appendChild(storyItem);
        }

        function showStory(){
            let currentPage = history[history.length - 1]; // set currentPage to last index of history array.

            storyContainer.innerHTML = ""; // reset html
            buttonContainer.innerHTML = ""; // reset buttons
            imageContainer.style.display = "none"; // hide image container when story is reset
            
            for(let page of history){ // build story text from items in history array
                buildStory(story[page].text);
            }
            
            for(let choice of story[currentPage].choices){ // build buttons from choices property of most recent story choice
                makeButton(choice[0], choice[1])
            }

            // Display image based on current page if available
            if(story[currentPage].image) {
                storyImage.src = story[currentPage].image;
                storyImage.style.display = "block"; // show the image
                imageContainer.style.display = "block"; // ensure image container is shown
            }
        }

        showStory();
    </script>
      
</body>
</html>
